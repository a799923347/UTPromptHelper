<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
  <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
  <id>com.ut.prompt.UTPromptHelper</id>

  <!-- Public plugin name should be written in Title Case.
       Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-name -->
  <name>UTPromptHelper</name>

  <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
  <vendor url="https://github.com/a799923347/UTPromptHelper">UTPromptHelper Team</vendor>

  <!-- Version of the plugin. It should be in the format "major.minor.patch" -->
  <version>2.4.0</version>

  <!-- Product and plugin compatibility requirements.
       Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
  <idea-version since-build="242.0" until-build="252.*"/>

  <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
       Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-description -->
  <description><![CDATA[
        <p>UTPromptHelper is a powerful IntelliJ IDEA plugin that automatically generates high-quality unit test prompts by analyzing Git code changes. It helps developers quickly create comprehensive unit tests for their code modifications.</p>
        
        <h3>UTPromptHelper - 智能单元测试提示词生成工具</h3>
        
        <p>UTPromptHelper 是一个专为 IntelliJ IDEA 设计的插件，通过分析 Git 代码变更自动生成高质量的单元测试提示词，帮助开发者快速为代码变更生成全面的单元测试。</p>
        
        <h4>核心功能</h4>
        <ul>
          <li><strong>智能代码变更检测</strong>：自动识别 Git 分支间的代码变更，精准过滤导入语句、注释和纯注释化代码的无效变更</li>
          <li><strong>多种使用入口</strong>：支持 Tools 菜单、右键菜单和右侧工具栏三种方式快速生成提示词</li>
          <li><strong>可编辑提示词模板</strong>：提供专业的测试生成模板，支持保存自定义模板并持久化配置</li>
          <li><strong>文件选择功能</strong>：支持选择性生成特定文件的测试，全选/全不选快速操作</li>
          <li><strong>实时预览</strong>：实时预览将要复制的内容，编辑提示词即时查看效果</li>
          <li><strong>一键复制</strong>：快速复制提示词到剪贴板，便捷使用</li>
          <li><strong>Cursor 编辑器集成</strong>：直接在 Cursor 编辑器中打开项目，无缝切换工作流</li>
        </ul>
        
        <h4>使用方式</h4>
        <ul>
          <li><strong>方式一：Tools 菜单</strong> - 选择 <code>Tools → 获取UT提示词</code>，分析整个项目的代码变更</li>
          <li><strong>方式二：右键菜单</strong> - 在文件上右键选择 <code>生成UT提示词</code>，快速分析单个文件</li>
          <li><strong>方式三：右侧工具栏</strong> - 打开 IDE 右侧的 "UTPrompt" 面板，点击对应按钮即可使用</li>
        </ul>
        
        <h4>技术特性</h4>
        <ul>
          <li>智能解析 Git diff 输出，准确识别包含注释的重要代码变更</li>
          <li>支持多 hunk 文件处理，完整覆盖所有变更区域</li>
          <li>过滤导入语句、包声明、注释和空白行，专注实际业务逻辑变更</li>
          <li>识别并忽略"将代码整体改为注释"的无效变更，避免不必要的测试工作</li>
          <li>跨平台支持（macOS、Windows、Linux）</li>
        </ul>
        
        <p><em>让单元测试生成更简单、更高效！</em></p>
    ]]></description>

  <!-- Product and plugin compatibility requirements.
       Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
  <depends>com.intellij.modules.platform</depends>

  <!-- Extension points defined by the plugin.
       Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
  <extensions defaultExtensionNs="com.intellij">
    <toolWindow id="UTPrompt"
                anchor="right"
                icon="/META-INF/pluginIcon.svg"
                factoryClass="com.ut.prompt.utprompthelper.UTPromptToolWindowFactory"
                stripeTitle="UTPrompt"/>
  </extensions>

  <actions>
    <action id="GitCompareAction" class="com.ut.prompt.utprompthelper.GitCompareAction" text="获取UT提示词" description="比较当前分支与master改动并获取用于AI生成单元测试的提示词">
      <add-to-group group-id="ToolsMenu" anchor="first"/>
    </action>
    
    <action id="FileBasedPromptAction" class="com.ut.prompt.utprompthelper.FileBasedPromptAction" text="生成UT提示词" description="为当前文件生成单元测试提示词">
      <add-to-group group-id="EditorPopupMenu" anchor="first"/>
    </action>
  </actions>
</idea-plugin>